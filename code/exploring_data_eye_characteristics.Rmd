---
title: "exploring_data_eye_characteristics"
author: "April Pan"
date: "2024-07-18"
output: html_document
---

```{r}
library(tidyverse)
library(ggplot2)
library(gtsummary)
library(rsample)
```

Use rm(dataName) to remove unwanted datatables
```{r}
myopiaData <- read.csv("myopia_og.csv", head = TRUE, sep = ";")

# Changing myopic to a factor variable
myopiaData <- myopiaData %>% 
  mutate(MYOPIC = case_when(MYOPIC == 1 ~ "Yes", 
                            MYOPIC == 0 ~ "No"))

myopiaData <- myopiaData %>% 
  mutate(MYOPIC = as.factor(MYOPIC))
```

EYE CHARACTERISTICS
_------------------------------------------------------------------------------
SPHEQ: Spherical equivalent of the participant's refractive error: sphere power plus half of the cylinder power

Decrease (More - ): Indicates more severe myopia.
Increase ( + or Less - ): Indicates less severe myopia or hyperopia (farsightedness).

represent a person's refractive error in a single value that combines the effects of nearsightedness (myopia), farsightedness (hyperopia), and astigmatism into one number

Boxplot for SPHEQ VS MYOPIC
```{r}
ggplot(myopiaData,
       aes(x = MYOPIC,
           y = SPHEQ))  +
  geom_boxplot()

spheqResult <- t.test(myopiaData$SPHEQ ~ myopiaData$MYOPIC)
print(spheqResult)

set.seed(0)
spheq_split <- initial_split(myopiaData, prop = 0.7) 
train_spheq <- training(spheq_split)
test_spheq <- testing(spheq_split)

spheq_model <- glm(MYOPIC~ SPHEQ, family=binomial, data=train_spheq)
summary(spheq_model)

spheq_model %>%
  tbl_regression(estimate_fun = function(x) style_number(x, digits = 3), exponentiate = TRUE)

spheq_prob <- spheq_model %>% 
  predict(test_spheq,type="response")

predicted.classes <- ifelse(spheq_prob > 0.5, "1", "0")
mean(predicted.classes == test_spheq$MYOPIC)
```
_------------------------------------------------------------------------------
AL: Axial length of the eye: measurement of the eye from the front surface of the cornea to the back surface of the retina

Increase: A longer axial length is associated with more severe myopia.
Decrease: A shorter axial length is associated with less severe myopia or normal vision.

Helps w/ diagnosing myopia 

Boxplot for AL VS MYOPIC
```{r}
ggplot(myopiaData,
       aes(x = MYOPIC,
           y = AL))  +
  geom_boxplot()

alResult <- t.test(myopiaData$AL ~ myopiaData$MYOPIC)
print(alResult)
```
_------------------------------------------------------------------------------
ACD: Anterior chamber depth: distance between the back of the cornea (the clear front part of the eye) and the front of the iris (the colored part of the eye)

Increase: Not directly correlated with myopia severity but can be associated with overall eye growth.
Decrease: May indicate a shallower anterior chamber, which is less directly related to myopia.

helps assess the risk of certain eye conditions

Boxplot for ACD VS MYOPIC
```{r}
ggplot(myopiaData,
       aes(x = MYOPIC,
           y = ACD))  +
  geom_boxplot()

acdResult <- t.test(myopiaData$ACD ~ myopiaData$MYOPIC)
print(acdResult)
```
_------------------------------------------------------------------------------
LT: Lens thickness. (of glasses)

Increase: Thicker lenses can contribute to myopic shifts but the relationship is complex.
Decrease: Thinner lenses are less likely to contribute to myopia.

Boxplot for LT VS MYOPIC
```{r}
ggplot(myopiaData,
       aes(x = MYOPIC,
           y = LT))  +
  geom_boxplot()

ltResult <- t.test(myopiaData$LT ~ myopiaData$MYOPIC)
print(ltResult)
```
_------------------------------------------------------------------------------
VCD: Vitreous chamber depth: distance from the back of the lens to the retina inside the eye

Increase: Greater vitreous chamber depth is strongly associated with more severe myopia.
Decrease: Shallower vitreous chamber depth is associated with less severe myopia or normal vision.

Boxplot for VCD VS MYOPIC
```{r}
ggplot(myopiaData,
       aes(x = MYOPIC,
           y = VCD))  +
  geom_boxplot()

vcdResult <- t.test(myopiaData$VCD ~ myopiaData$MYOPIC)
print(vcdResult)
```
_------------------------------------------------------------------------------
